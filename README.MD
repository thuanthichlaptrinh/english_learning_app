# ğŸ´ Ná»n Táº£ng Card Words

> Ná»n táº£ng há»c tá»« vá»±ng cáº¥p doanh nghiá»‡p vá»›i cÃ´ng nghá»‡ láº·p láº¡i ngáº¯t quÃ£ng (Spaced Repetition) há»— trá»£ bá»Ÿi AI, thÃ´ng bÃ¡o thá»i gian thá»±c vÃ  cÃ¡c tÃ­nh nÄƒng gamification.

[![Java](https://img.shields.io/badge/Java-17-orange)](https://www.oracle.com/java/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.2.5-brightgreen)](https://spring.io/projects/spring-boot)
[![Python](https://img.shields.io/badge/Python-3.11-blue)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-Latest-009688)](https://fastapi.tiangolo.com/)
[![Docker](https://img.shields.io/badge/Docker-Compose-2496ED)](https://www.docker.com/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16-336791)](https://www.postgresql.org/)
[![Redis](https://img.shields.io/badge/Redis-7-DC382D)](https://redis.io/)
[![Firebase](https://img.shields.io/badge/Firebase-Storage-FFCA28)](https://firebase.google.com/)

---

## ğŸ“– Má»¥c Lá»¥c

-   [Tá»•ng Quan](#-tá»•ng-quan)
-   [Kiáº¿n TrÃºc](#-kiáº¿n-trÃºc)
-   [Báº¯t Äáº§u Nhanh](#-báº¯t-Ä‘áº§u-nhanh)
-   [Dá»‹ch Vá»¥](#-dá»‹ch-vá»¥)
-   [TÃ­nh NÄƒng ChÃ­nh](#-tÃ­nh-nÄƒng-chÃ­nh)
-   [Cáº¥u HÃ¬nh](#ï¸-cáº¥u-hÃ¬nh)
-   [PhÃ¡t Triá»ƒn](#-phÃ¡t-triá»ƒn)
-   [CÆ¡ Sá»Ÿ Dá»¯ Liá»‡u](#ï¸-cÆ¡-sá»Ÿ-dá»¯-liá»‡u)
-   [TÃ i Liá»‡u API](#-tÃ i-liá»‡u-api)
-   [Kháº¯c Phá»¥c Sá»± Cá»‘](#ï¸-kháº¯c-phá»¥c-sá»±-cá»‘)
-   [ÄÃ³ng GÃ³p](#-Ä‘Ã³ng-gÃ³p)

---

## ğŸŒŸ Tá»•ng Quan

**Card Words Platform** lÃ  má»™t há»‡ thá»‘ng há»c tá»« vá»±ng toÃ n diá»‡n káº¿t há»£p:

-   **Spring Boot Backend**: RESTful API vá»›i thÃ´ng bÃ¡o thá»i gian thá»±c qua WebSocket.
-   **AI Service**: Dá»± Ä‘oÃ¡n Ã´n táº­p thÃ´ng minh sá»­ dá»¥ng LightGBM.
-   **PostgreSQL**: CÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡ máº¡nh máº½ vá»›i Flyway migrations.
-   **Redis**: Caching hiá»‡u nÄƒng cao vÃ  quáº£n lÃ½ session.
-   **Firebase Storage**: LÆ°u trá»¯ hÃ¬nh áº£nh tá»« vá»±ng vÃ  avatar ngÆ°á»i dÃ¹ng.
-   **Docker**: Triá»ƒn khai container hÃ³a cho táº¥t cáº£ cÃ¡c dá»‹ch vá»¥.

### Kháº£ NÄƒng Cá»‘t LÃµi

âœ… **XÃ¡c thá»±c & PhÃ¢n quyá»n** - JWT + OAuth2 (Google)  
âœ… **Quáº£n lÃ½ Tá»« vá»±ng** - CRUD vá»›i metadata phong phÃº vÃ  hÃ¬nh áº£nh (Firebase)  
âœ… **Láº·p láº¡i Ngáº¯t quÃ£ng** - Thuáº­t toÃ¡n SM-2 tá»‘i Æ°u hÃ³a viá»‡c há»c  
âœ… **ThÃ´ng bÃ¡o Thá»i gian thá»±c** - Giao thá»©c WebSocket + STOMP  
âœ… **Gamification** - Nhiá»u cháº¿ Ä‘á»™ chÆ¡i vá»›i báº£ng xáº¿p háº¡ng  
âœ… **Ã”n táº­p Há»— trá»£ bá»Ÿi AI** - Dá»± Ä‘oÃ¡n Machine Learning  
âœ… **Nháº¯c nhá»Ÿ Tá»± Ä‘á»™ng** - Email chuá»—i hÃ ng ngÃ y qua scheduler  
âœ… **Admin Dashboard** - GiÃ¡m sÃ¡t ngÆ°á»i dÃ¹ng vÃ  phÃ¢n tÃ­ch  
âœ… **Äá»“ng bá»™ Offline** - Äá»“ng bá»™ dá»¯ liá»‡u thÃ¢n thiá»‡n vá»›i thiáº¿t bá»‹ di Ä‘á»™ng

---

## ğŸ— Kiáº¿n TrÃºc

### Cáº¥u TrÃºc Dá»± Ãn

```
card-words-platform/
â”œâ”€â”€ ğŸ“ card-words/              # Spring Boot Backend API
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”‚   â”œâ”€â”€ java/            # MÃ£ nguá»“n á»©ng dá»¥ng
â”‚   â”‚   â”‚   â””â”€â”€ resources/       # Cáº¥u hÃ¬nh & migrations
â”‚   â”‚   â””â”€â”€ test/                # Unit & integration tests
â”‚   â”œâ”€â”€ pom.xml                  # Maven dependencies
â”‚   â”œâ”€â”€ Dockerfile               # Multi-stage build
â”‚   â””â”€â”€ docker-compose.yml       # Service-specific compose
â”‚
â”œâ”€â”€ ğŸ“ card-words-ai/           # Python AI Service
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/                 # FastAPI endpoints
â”‚   â”‚   â”œâ”€â”€ core/                # Business logic
â”‚   â”‚   â”œâ”€â”€ db/                  # Káº¿t ná»‘i Database
â”‚   â”‚   â””â”€â”€ middleware/          # Authentication & logging
â”‚   â”œâ”€â”€ models/                  # LightGBM trained models
â”‚   â”œâ”€â”€ pyproject.toml           # Poetry dependencies
â”‚   â””â”€â”€ Dockerfile               # Python container build
â”‚
â”œâ”€â”€ ğŸ“ docs/                    # TÃ i liá»‡u chi tiáº¿t
â”‚   â”œâ”€â”€ admin/                   # TÃ­nh nÄƒng Admin
â”‚   â”œâ”€â”€ AI/                      # TÃ i liá»‡u mÃ´ hÃ¬nh ML
â”‚   â”œâ”€â”€ auth/                    # HÆ°á»›ng dáº«n xÃ¡c thá»±c
â”‚   â”œâ”€â”€ docker/                  # HÆ°á»›ng dáº«n triá»ƒn khai
â”‚   â””â”€â”€ ...                      # TÃ i liá»‡u tÃ­nh nÄƒng cá»¥ thá»ƒ
â”‚
â”œâ”€â”€ docker-compose.yml           # ğŸ”¥ Root orchestration (táº¥t cáº£ services)
â”œâ”€â”€ .env                         # ğŸ” Biáº¿n mÃ´i trÆ°á»ng (gitignored)
â”œâ”€â”€ .gitignore                   # Git exclusions
â””â”€â”€ README.MD                    # File nÃ y
```

### Technology Stack

| ThÃ nh pháº§n        | CÃ´ng nghá»‡    | PhiÃªn báº£n | Má»¥c Ä‘Ã­ch                       |
| ----------------- | ------------ | --------- | ------------------------------ |
| **Backend API**   | Spring Boot  | 3.2.5     | RESTful API & WebSocket server |
| **NgÃ´n ngá»¯**      | Java         | 17        | NgÃ´n ngá»¯ láº­p trÃ¬nh chÃ­nh       |
| **AI Service**    | FastAPI      | Má»›i nháº¥t  | ML prediction endpoints        |
| **ML Engine**     | LightGBM     | Má»›i nháº¥t  | Dá»± Ä‘oÃ¡n Ã´n táº­p thÃ´ng minh      |
| **Database**      | PostgreSQL   | 16        | LÆ°u trá»¯ dá»¯ liá»‡u chÃ­nh          |
| **Cache**         | Redis        | 7         | Session & performance caching  |
| **Storage**       | Firebase     | -         | LÆ°u trá»¯ hÃ¬nh áº£nh (Cloud)       |
| **Message Queue** | STOMP        | -         | Nháº¯n tin WebSocket             |
| **Build Tool**    | Maven        | 3.9+      | Quáº£n lÃ½ phá»¥ thuá»™c Java         |
| **Migration**     | Flyway       | -         | Quáº£n lÃ½ phiÃªn báº£n Schema DB    |
| **Container**     | Docker       | Má»›i nháº¥t  | Äiá»u phá»‘i dá»‹ch vá»¥              |
| **Auth**          | JWT + OAuth2 | -         | XÃ¡c thá»±c & phÃ¢n quyá»n          |

---

## ğŸš€ Báº¯t Äáº§u Nhanh

### YÃªu Cáº§u TiÃªn Quyáº¿t

Äáº£m báº£o báº¡n Ä‘Ã£ cÃ i Ä‘áº·t:

-   **Docker Desktop** 20.10+ (hoáº·c Docker Engine + Docker Compose)
-   **Git** Ä‘á»ƒ quáº£n lÃ½ mÃ£ nguá»“n

**TÃ¹y chá»n (cho phÃ¡t triá»ƒn local):**

-   Java 17+ (KhuyÃªn dÃ¹ng Eclipse Temurin)
-   Maven 3.9+
-   Python 3.11+ vá»›i Poetry
-   Node.js 18+ (Ä‘á»ƒ tÃ­ch há»£p frontend)

### CÃ i Äáº·t

#### 1. Clone Repository

```bash
git clone https://github.com/yourusername/card-words-platform.git
cd card-words-platform
```

#### 2. Cáº¥u HÃ¬nh MÃ´i TrÆ°á»ng

```bash
# Copy template
cp .env.example .env

# Chá»‰nh sá»­a vá»›i thÃ´ng tin cá»§a báº¡n
# Báº¯t buá»™c: Database password, JWT secret, email credentials, Firebase config
nano .env  # hoáº·c dÃ¹ng editor Æ°a thÃ­ch
```

#### 3. Khá»Ÿi Cháº¡y Táº¥t Cáº£ Dá»‹ch Vá»¥

```bash
# Build vÃ  start táº¥t cáº£ containers
docker-compose up -d --build

# Xem logs
docker-compose logs -f

# Kiá»ƒm tra sá»©c khá»e dá»‹ch vá»¥
docker-compose ps
```

#### 4. Kiá»ƒm Tra Triá»ƒn Khai

```bash
# Backend API health
curl http://localhost:8080/actuator/health

# AI Service health
curl http://localhost:8001/health

# Database connection
docker-compose exec postgres pg_isready -U postgres
```

### Truy Cáº­p Dá»‹ch Vá»¥

| Dá»‹ch vá»¥             | URL                                   | ThÃ´ng tin Ä‘Äƒng nháº­p         |
| ------------------- | ------------------------------------- | --------------------------- |
| **Spring Boot API** | http://localhost:8080                 | YÃªu cáº§u JWT token           |
| Swagger UI          | http://localhost:8080/swagger-ui.html | -                           |
| API Documentation   | http://localhost:8080/v3/api-docs     | -                           |
| Actuator            | http://localhost:8080/actuator        | -                           |
| **WebSocket**       | ws://localhost:8080/ws                | JWT trong handshake         |
| **AI Service**      | http://localhost:8001                 | Shared JWT auth             |
| AI Documentation    | http://localhost:8001/docs            | -                           |
| **PostgreSQL**      | localhost:5433                        | `postgres` / xem `.env`     |
| **Redis**           | localhost:6379                        | KhÃ´ng máº­t kháº©u              |
| **PgAdmin**         | http://localhost:5050                 | admin@cardwords.com / admin |
| **Redis Insight**   | http://localhost:5540                 | -                           |

#### Ma Tráº­n URL WebSocket

| Ngá»¯ cáº£nh                  | URL                           | Ghi chÃº                                                                                       |
| ------------------------- | ----------------------------- | --------------------------------------------------------------------------------------------- |
| PhÃ¡t triá»ƒn Local          | `ws://localhost:8080/ws`      | Máº·c Ä‘á»‹nh khi cháº¡y Spring Boot qua Maven hoáº·c Docker port mapping                              |
| Docker Compose networking | `ws://card-words-api:8080/ws` | Sá»­ dá»¥ng tÃªn service nÃ y khi container khÃ¡c (frontend, AI, etc.) cáº§n subscribe trong cÃ¹ng máº¡ng |
| Production (HTTPS)        | `wss://<your-domain>/ws`      | Thay tháº¿ báº±ng domain public sau load balancer / reverse proxy; yÃªu cáº§u TLS termination        |

> ğŸ” LuÃ´n gá»­i `Authorization: Bearer <JWT>` trong header STOMP CONNECT báº¥t ká»ƒ mÃ´i trÆ°á»ng nÃ o.

### Test API Nhanh

#### 1. ÄÄƒng KÃ½ User

```bash
curl -X POST http://localhost:8080/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "name": "John Doe",
    "email": "john@example.com",
    "password": "SecurePass123!"
  }'
```

#### 2. ÄÄƒng Nháº­p

```bash
curl -X POST http://localhost:8080/api/v1/auth/signin \
  -H "Content-Type: application/json" \
  -d '{
    "email": "john@example.com",
    "password": "SecurePass123!"
  }'
```

**Response:**

```json
{
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "type": "Bearer",
    "email": "john@example.com",
    "name": "John Doe"
}
```

#### 3. Test Endpoint CÃ³ XÃ¡c Thá»±c

```bash
curl -X GET http://localhost:8080/api/v1/vocabs \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

#### 4. Test Káº¿t Ná»‘i WebSocket

Má»Ÿ `test-websocket-events.html` trong trÃ¬nh duyá»‡t:

1. DÃ¡n JWT token cá»§a báº¡n
2. Nháº¥n "Connect WebSocket"
3. Subscribe cÃ¡c kÃªnh thÃ´ng bÃ¡o
4. Trigger má»™t thÃ´ng bÃ¡o (vÃ­ dá»¥: hoÃ n thÃ nh game)
5. Xem cáº­p nháº­t thá»i gian thá»±c! âš¡

---

## ğŸ“¦ Dá»‹ch Vá»¥

### Spring Boot Backend (card-words)

**CÃ´ng Nghá»‡ Cá»‘t LÃµi:**

-   Spring Boot 3.2.5 (Java 17)
-   Spring Security + JWT Authentication
-   Spring WebSocket + STOMP Messaging
-   Spring Data JPA + Hibernate
-   Spring Scheduler (TÃ¡c vá»¥ tá»± Ä‘á»™ng)
-   PostgreSQL 16 (Database chÃ­nh)
-   Redis 7 (Lá»›p Caching)
-   Flyway (Database migrations)
-   **Firebase Storage** (LÆ°u trá»¯ hÃ¬nh áº£nh)
-   Google OAuth2 (ÄÄƒng nháº­p xÃ£ há»™i)
-   JavaMailSender (Dá»‹ch vá»¥ Email)

**TÃ­nh NÄƒng ChÃ­nh:**

ğŸ” **XÃ¡c thá»±c & PhÃ¢n quyá»n**

-   XÃ¡c thá»±c dá»±a trÃªn JWT vá»›i refresh tokens
-   TÃ­ch há»£p Google OAuth2
-   Kiá»ƒm soÃ¡t truy cáº­p dá»±a trÃªn vai trÃ² (ADMIN, USER)
-   MÃ£ hÃ³a máº­t kháº©u an toÃ n vá»›i BCrypt

ğŸ“š **Quáº£n lÃ½ Tá»« vá»±ng**

-   CRUD cho tá»« vá»±ng vÃ  chá»§ Ä‘á»
-   Metadata phong phÃº (Ä‘á»‹nh nghÄ©a, vÃ­ dá»¥, hÃ¬nh áº£nh tá»« Firebase)
-   TÃ¬m kiáº¿m vÃ  lá»c nÃ¢ng cao
-   Há»— trá»£ Ä‘a ngÃ´n ngá»¯

ğŸ® **TrÃ² chÆ¡i TÆ°Æ¡ng tÃ¡c**

-   Quick Quiz (ÄÃºng/Sai vá»›i bonus chuá»—i)
-   Image-Word Matching (Game láº­t tháº» nhá»›)
-   Word Definition Matching
-   Báº£ng xáº¿p háº¡ng thá»i gian thá»±c
-   TÃ­nh Ä‘iá»ƒm vá»›i bonus thá»i gian

ğŸ“Š **Tiáº¿n TrÃ¬nh Há»c Táº­p**

-   Thuáº­t toÃ¡n láº·p láº¡i ngáº¯t quÃ£ng SM-2
-   Theo dÃµi má»©c Ä‘á»™ thÃ nh tháº¡o tá»« vá»±ng
-   PhÃ¢n tÃ­ch vÃ  thá»‘ng kÃª tiáº¿n Ä‘á»™
-   LÃªn lá»‹ch Ã´n táº­p cÃ¡ nhÃ¢n hÃ³a

ğŸ”¥ **Há»‡ Thá»‘ng Streak**

-   Theo dÃµi tÃ­nh kiÃªn trÃ¬ há»c táº­p hÃ ng ngÃ y
-   Cáº­p nháº­t streak tá»± Ä‘á»™ng
-   ThÃ nh tá»±u cá»™t má»‘c (7, 30, 100 ngÃ y)
-   Lá»‹ch hoáº¡t Ä‘á»™ng trá»±c quan
-   Ká»· lá»¥c cÃ¡ nhÃ¢n tá»‘t nháº¥t

ğŸ”” **ThÃ´ng BÃ¡o Thá»i Gian Thá»±c (WebSocket)**

-   Giao thá»©c WebSocket + STOMP
-   5 kÃªnh thÃ´ng bÃ¡o chuyÃªn dá»¥ng
-   Äá»“ng bá»™ tá»©c thÃ¬ trÃªn nhiá»u thiáº¿t bá»‹
-   ThÃ nh tá»±u tá»± Ä‘á»™ng kÃ­ch hoáº¡t
-   Kháº£ nÄƒng broadcast cá»§a Admin

ğŸ“§ **Tá»± Äá»™ng HÃ³a Email**

-   Email chÃ o má»«ng cho ngÆ°á»i dÃ¹ng má»›i
-   LiÃªn káº¿t kÃ­ch hoáº¡t tÃ i khoáº£n
-   Äáº·t láº¡i máº­t kháº©u vá»›i token an toÃ n
-   Nháº¯c nhá»Ÿ streak hÃ ng ngÃ y (9:00 AM)
-   Template HTML Ä‘áº¹p máº¯t

ğŸ“ **Admin Dashboard**

-   GiÃ¡m sÃ¡t hoáº¡t Ä‘á»™ng ngÆ°á»i dÃ¹ng
-   Nháº­t kÃ½ hÃ nh Ä‘á»™ng (Action logs) chi tiáº¿t
-   Thá»‘ng kÃª vÃ  phÃ¢n tÃ­ch há»‡ thá»‘ng
-   Quáº£n lÃ½ thÃ´ng bÃ¡o
-   CÃ´ng cá»¥ quáº£n lÃ½ ngÆ°á»i dÃ¹ng

ğŸ’¾ **Há»— Trá»£ Äá»“ng Bá»™ Offline**

-   Endpoint táº£i xuá»‘ng dá»¯ liá»‡u hÃ ng loáº¡t
-   Chiáº¿n lÆ°á»£c giáº£i quyáº¿t xung Ä‘á»™t
-   Äá»“ng bá»™ Delta (chá»‰ thay Ä‘á»•i)
-   Pháº£n há»“i tá»‘i Æ°u cho mobile

**API Endpoints:** `http://localhost:8080/api/v1/`

**TÃ i liá»‡u:**

-   Swagger UI: `/swagger-ui.html`
-   OpenAPI Spec: `/v3/api-docs`
-   WebSocket Guide: `docs/WEBSOCKET_EVENTS.md`
-   Notification playbook: `docs/websocket/WEBSOCKET_NOTIFICATION_PLAYBOOK.md`
-   Notification API: `docs/NOTIFICATION_API_COMPLETE.md`

---

### AI Service (card-words-ai)

**CÃ´ng Nghá»‡ Cá»‘t LÃµi:**

-   Python 3.11
-   FastAPI (Framework API hiá»‡u nÄƒng cao)
-   LightGBM (ThÆ° viá»‡n ML Gradient boosting)
-   PostgreSQL (Truy cáº­p database chá»‰ Ä‘á»c)
-   Redis (Caching dá»± Ä‘oÃ¡n)
-   SQLAlchemy (Database ORM)
-   Pydantic (Data validation)
-   Poetry (Quáº£n lÃ½ phá»¥ thuá»™c)

**TÃ­nh NÄƒng ChÃ­nh:**

ğŸ¤– **Dá»± ÄoÃ¡n Ã”n Táº­p ThÃ´ng Minh**

-   MÃ´ hÃ¬nh mÃ¡y há»c LightGBM
-   Dá»± Ä‘oÃ¡n thá»i Ä‘iá»ƒm Ã´n táº­p tá»‘i Æ°u
-   Xem xÃ©t cÃ¡c máº«u hiá»‡u suáº¥t cá»§a ngÆ°á»i dÃ¹ng
-   ThÃ­ch á»©ng vá»›i Ä‘Æ°á»ng cong há»c táº­p cÃ¡ nhÃ¢n

âš¡ **Tá»‘i Æ¯u HÃ³a Hiá»‡u NÄƒng**

-   Redis caching cho cÃ¡c dá»± Ä‘oÃ¡n
-   Truy váº¥n database báº¥t Ä‘á»“ng bá»™
-   Connection pooling
-   Thá»i gian pháº£n há»“i < 100ms

ğŸ” **Báº£o Máº­t**

-   XÃ¡c thá»±c JWT (chia sáº» vá»›i Spring Boot)
-   Truy cáº­p database chá»‰ Ä‘á»c
-   Giá»›i háº¡n tá»‘c Ä‘á»™ request (Rate limiting)
-   Validate Ä‘áº§u vÃ o vá»›i Pydantic

ğŸ“Š **Äáº·c TrÆ°ng MÃ´ HÃ¬nh (Features)**

-   Lá»‹ch sá»­ Ä‘á»™ chÃ­nh xÃ¡c cá»§a ngÆ°á»i dÃ¹ng
-   Thá»i gian ká»ƒ tá»« láº§n Ã´n táº­p cuá»‘i
-   Äá»™ khÃ³ cá»§a tá»« vá»±ng
-   Chá»‰ sá»‘ hiá»‡u suáº¥t ngÆ°á»i dÃ¹ng
-   TÃ­nh nháº¥t quÃ¡n cá»§a Streak

**API Endpoints:** `http://localhost:8001/api/`

**TÃ i liá»‡u:**

-   Interactive Docs: `/docs`
-   ReDoc: `/redoc`
-   Chi tiáº¿t mÃ´ hÃ¬nh: `docs/AI/`

---

## ğŸ¯ TÃ­nh NÄƒng ChÃ­nh

### 1. ThÃ´ng BÃ¡o Thá»i Gian Thá»±c vá»›i WebSocket

**Há»‡ thá»‘ng push notification hoÃ n chá»‰nh khÃ´ng cÃ³ Ä‘á»™ trá»… polling.**

#### Kiáº¿n TrÃºc

-   **Giao thá»©c**: STOMP over WebSocket vá»›i SockJS fallback
-   **XÃ¡c thá»±c**: JWT token trong handshake header
-   **Äá»™ trá»…**: < 100ms end-to-end
-   **Kháº£ nÄƒng má»Ÿ rá»™ng**: Há»— trá»£ hÃ ng ngÃ n káº¿t ná»‘i Ä‘á»“ng thá»i

#### CÃ¡c KÃªnh ThÃ´ng BÃ¡o

| KÃªnh                                      | Má»¥c Ä‘Ã­ch        | Trigger                             |
| ----------------------------------------- | --------------- | ----------------------------------- |
| `/user/queue/notifications`               | ThÃ´ng bÃ¡o má»›i   | ThÃ nh tá»±u, nháº¯c nhá»Ÿ, tin nháº¯n admin |
| `/user/queue/notifications/read`          | ÄÃ¡nh dáº¥u Ä‘Ã£ Ä‘á»c | User Ä‘Ã¡nh dáº¥u 1 thÃ´ng bÃ¡o Ä‘Ã£ Ä‘á»c    |
| `/user/queue/notifications/read-all`      | ÄÃ¡nh dáº¥u táº¥t cáº£ | User Ä‘Ã¡nh dáº¥u táº¥t cáº£ thÃ´ng bÃ¡o      |
| `/user/queue/notifications/deleted`       | XÃ³a Ä‘Æ¡n láº»      | User xÃ³a thÃ´ng bÃ¡o                  |
| `/user/queue/notifications/batch-deleted` | XÃ³a hÃ ng loáº¡t   | User xÃ³a nhiá»u thÃ´ng bÃ¡o            |
| `/topic/admin/user-registrations`         | Admin broadcast | Báº¥t ká»³ Ä‘Äƒng kÃ½ user thÃ nh cÃ´ng nÃ o  |

#### ThÃ´ng BÃ¡o Tá»± Äá»™ng KÃ­ch Hoáº¡t

âœ¨ **ThÃ nh Tá»±u Game** (Gá»­i tá»©c thÃ¬)

-   **Quick Quiz**: Äiá»ƒm cao, Äá»™ chÃ­nh xÃ¡c tuyá»‡t Ä‘á»‘i, Hiá»‡u suáº¥t xuáº¥t sáº¯c
-   **Word Definition**: Äiá»ƒm cao, Äá»™ chÃ­nh xÃ¡c tuyá»‡t Ä‘á»‘i, Hiá»‡u suáº¥t xuáº¥t sáº¯c
-   ThÆ°á»Ÿng hoÃ n thÃ nh tá»‘c Ä‘á»™

ğŸ”¥ **Cá»™t Má»‘c Streak** (Cáº­p nháº­t thá»i gian thá»±c)

-   KiÃªn trÃ¬ 7 ngÃ y
-   Cá»‘ng hiáº¿n 30 ngÃ y
-   ThÃ nh tháº¡o 100 ngÃ y
-   Ká»· lá»¥c cÃ¡ nhÃ¢n má»›i

ğŸ† **Báº£ng Xáº¿p Háº¡ng & Má»¥c TiÃªu**

-   **ThÄƒng Háº¡ng**: Top 1, Top 3, Top 10 báº£ng xáº¿p háº¡ng
-   **Má»¥c TiÃªu NgÃ y**: Ã”n táº­p 10, 20, 50 tá»« má»—i ngÃ y
-   **ChÃ o Má»«ng**: Lá»i chÃ o ngay khi Ä‘Äƒng kÃ½

ğŸ“§ **Nháº¯c Nhá»Ÿ HÃ ng NgÃ y** (Gá»­i kÃ©p)

-   LÃªn lá»‹ch 2 láº§n/ngÃ y: 07:00 & 19:00 (kÃ¨m cáº£nh bÃ¡o gÃ£y chuá»—i lÃºc 07:00)
-   Email + WebSocket notification
-   Nháº¯m má»¥c tiÃªu thÃ´ng minh (users vá»›i streak hiá»‡n táº¡i â‰¥ 3 ngÃ y)

ğŸ“¢ **Admin Broadcasts** (Push tá»›i táº¥t cáº£ users)

-   ThÃ´ng bÃ¡o há»‡ thá»‘ng
-   Cáº­p nháº­t ná»n táº£ng
-   ThÃ´ng bÃ¡o báº£o trÃ¬
-   Feed Ä‘Äƒng kÃ½ realtime qua `/topic/admin/user-registrations` giÃºp dashboard cáº­p nháº­t tá»•ng user

#### Lá»£i Ãch Hiá»‡u NÄƒng

| Chá»‰ sá»‘              | Polling | WebSocket | Cáº£i thiá»‡n           |
| ------------------- | ------- | --------- | ------------------- |
| Äá»™ trá»…              | 10-30s  | < 100ms   | **Nhanh hÆ¡n 99.7%** |
| Server Requests     | 360/giá» | 1/session | **Giáº£m 99.9%**      |
| TÃ¡c Ä‘á»™ng Pin        | Cao     | Tá»‘i thiá»ƒu | **Tiáº¿t kiá»‡m ~90%**  |
| Äá»“ng bá»™ Äa thiáº¿t bá»‹ | Trá»…     | Tá»©c thÃ¬   | **Thá»i gian thá»±c**  |

**CÃ´ng Cá»¥ Test:**

-   Test tÆ°Æ¡ng tÃ¡c: `test-websocket-events.html`
-   VÃ­ dá»¥ Client: React, Flutter, JavaScript
-   Xem: `docs/WEBSOCKET_EVENTS.md`

---

### 2. Há»‡ Thá»‘ng Email Tá»± Äá»™ng

**Gá»­i email hoÃ n toÃ n tá»± Ä‘á»™ng vá»›i template HTML Ä‘áº¹p máº¯t.**

#### CÃ¡c Loáº¡i Email

ğŸ“§ **Email ChÃ o Má»«ng**

-   Gá»­i khi Ä‘Äƒng kÃ½ ngÆ°á»i dÃ¹ng
-   Bao gá»“m máº­t kháº©u táº¡m thá»i
-   Giá»›i thiá»‡u ná»n táº£ng

ğŸ”‘ **KÃ­ch Hoáº¡t TÃ i Khoáº£n**

-   LiÃªn káº¿t kÃ­ch hoáº¡t an toÃ n
-   Háº¿t háº¡n sau 24 giá»
-   XÃ¡c minh email

ğŸ”’ **Äáº·t Láº¡i Máº­t Kháº©u**

-   Token Ä‘áº·t láº¡i an toÃ n
-   LiÃªn káº¿t sá»­ dá»¥ng má»™t láº§n
-   Háº¿t háº¡n sau 1 giá»

â° **Nháº¯c Nhá»Ÿ Streak HÃ ng NgÃ y**

-   Lá»‹ch tá»± Ä‘á»™ng: 9:00 AM hÃ ng ngÃ y
-   TiÃªu chÃ­ nháº¯m má»¥c tiÃªu thÃ´ng minh:
    -   âœ… ÄÃ£ há»c hÃ´m qua
    -   âŒ ChÆ°a há»c hÃ´m nay
    -   ğŸ”¥ Streak â‰¥ 3 ngÃ y (Ä‘Ã¡ng Ä‘á»ƒ báº£o vá»‡)
-   Gá»­i kÃ©p: Email + WebSocket
-   Template HTML Ä‘áº¹p máº¯t
-   KhÃ´ng cáº§n can thiá»‡p thá»§ cÃ´ng

#### Cáº¥u HÃ¬nh

```properties
# Gmail SMTP (khuyÃªn dÃ¹ng)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=your-email@gmail.com
spring.mail.password=your-app-password  # DÃ¹ng App Password, khÃ´ng pháº£i máº­t kháº©u tÃ i khoáº£n
```

**HÆ°á»›ng dáº«n cÃ i Ä‘áº·t:** Táº¡o Gmail App Password táº¡i https://myaccount.google.com/apppasswords

---

### 3. Láº·p Láº¡i Ngáº¯t QuÃ£ng Há»— Trá»£ Bá»Ÿi AI

**MÃ´ hÃ¬nh mÃ¡y há»c LightGBM Ä‘á»ƒ lÃªn lá»‹ch Ã´n táº­p cÃ¡ nhÃ¢n hÃ³a.**

#### Thuáº­t ToÃ¡n: SM-2 NÃ¢ng Cáº¥p vá»›i ML

**Tham Sá»‘ SM-2 Truyá»n Thá»‘ng:**

-   `EF` (Easiness Factor): 1.3 - 2.5
-   `Interval`: Sá»‘ ngÃ y cho Ä‘áº¿n láº§n Ã´n tiáº¿p theo
-   `Repetition`: Sá»‘ láº§n Ã´n táº­p thÃ nh cÃ´ng

**Cáº£i Tiáº¿n ML:**

-   Máº«u hiá»‡u suáº¥t ngÆ°á»i dÃ¹ng
-   Hiá»‡u quáº£ theo thá»i gian trong ngÃ y
-   Äá»™ khÃ³ cá»§a tá»« vá»±ng
-   Xu hÆ°á»›ng Ä‘á»™ chÃ­nh xÃ¡c lá»‹ch sá»­

#### Quy TrÃ¬nh Dá»± ÄoÃ¡n

```
User Request â†’ Model Features â†’ LightGBM Prediction â†’ Redis Cache â†’ Response
                â†“
        [correctness_rate, time_since_last, vocab_difficulty, user_streak]
```

#### Hiá»‡u NÄƒng

-   **Thá»i gian dá»± Ä‘oÃ¡n**: < 50ms (cached: < 5ms)
-   **Äá»™ chÃ­nh xÃ¡c mÃ´ hÃ¬nh**: ~85% (F1 score)
-   **Tá»· lá»‡ Cache Hit**: > 90%
-   **Features**: 15 Ä‘áº·c trÆ°ng Ä‘Æ°á»£c ká»¹ thuáº­t hÃ³a

**Huáº¥n luyá»‡n mÃ´ hÃ¬nh:** `card-words-ai/train-model.sh`

---

### 4. Admin Dashboard

**CÃ´ng cá»¥ giÃ¡m sÃ¡t vÃ  quáº£n lÃ½ toÃ n diá»‡n.**

#### TÃ­nh NÄƒng

ğŸ“Š **PhÃ¢n TÃ­ch (Analytics)**

-   Tá»•ng ngÆ°á»i dÃ¹ng vÃ  tÄƒng trÆ°á»Ÿng
-   PhiÃªn hoáº¡t Ä‘á»™ng (Active sessions)
-   Tá»· lá»‡ hoÃ n thÃ nh game
-   Chá»‰ sá»‘ tiáº¿n trÃ¬nh há»c táº­p

ğŸ“ **Nháº­t KÃ½ HÃ nh Äá»™ng (Action Logs)**

-   Theo dÃµi hoáº¡t Ä‘á»™ng ngÆ°á»i dÃ¹ng
-   Sá»± kiá»‡n Ä‘Äƒng nháº­p/Ä‘Äƒng xuáº¥t
-   HoÃ n thÃ nh game
-   TÆ°Æ¡ng tÃ¡c tá»« vá»±ng
-   Lá»c nÃ¢ng cao theo ngÃ y, user, loáº¡i hÃ nh Ä‘á»™ng

ğŸ”” **Quáº£n LÃ½ ThÃ´ng BÃ¡o**

-   Táº¡o thÃ´ng bÃ¡o há»‡ thá»‘ng
-   Broadcast tá»›i táº¥t cáº£ users
-   ThÃ´ng bÃ¡o nháº¯m má»¥c tiÃªu user cá»¥ thá»ƒ
-   Xem lá»‹ch sá»­ thÃ´ng bÃ¡o

ğŸ‘¥ **Quáº£n LÃ½ NgÆ°á»i DÃ¹ng**

-   Xem há»“ sÆ¡ ngÆ°á»i dÃ¹ng
-   GiÃ¡m sÃ¡t hoáº¡t Ä‘á»™ng
-   GÃ¡n vai trÃ² (Role assignment)
-   Quáº£n lÃ½ tráº¡ng thÃ¡i tÃ i khoáº£n

**TÃ i liá»‡u:** `docs/admin/ADMIN_DASHBOARD_API.md`

---

### 5. Há»‡ Thá»‘ng Gamification

**Nhiá»u cháº¿ Ä‘á»™ chÆ¡i vá»›i tÃ­nh Ä‘iá»ƒm thÃ´ng minh vÃ  báº£ng xáº¿p háº¡ng.**

#### Cháº¿ Äá»™ ChÆ¡i

ğŸ¯ **Quick Quiz**

-   Äá»‹nh dáº¡ng ÄÃºng/Sai
-   10 cÃ¢u há»i má»—i phiÃªn
-   Bonus thá»i gian: +10 Ä‘iá»ƒm náº¿u < 5 giÃ¢y
-   Bonus streak: +5 Ä‘iá»ƒm má»—i cÃ¢u tráº£ lá»i Ä‘Ãºng liÃªn tiáº¿p
-   ThÃ nh tá»±u Ä‘iá»ƒm tuyá»‡t Ä‘á»‘i: 100% Ä‘á»™ chÃ­nh xÃ¡c

ğŸ–¼ï¸ **Image-Word Matching**

-   Game láº­t tháº» nhá»› (Memory-style)
-   GhÃ©p tá»« vá»›i hÃ¬nh áº£nh
-   TÃ­nh Ä‘iá»ƒm dá»±a trÃªn thá»i gian
-   CÃ¡c cáº¥p Ä‘á»™ khÃ³

ğŸ“– **Word Definition Matching**

-   GhÃ©p tá»« vá»›i Ä‘á»‹nh nghÄ©a
-   Äá»‹nh dáº¡ng tráº¯c nghiá»‡m
-   Äá»™ khÃ³ thÃ­ch á»©ng

#### Thuáº­t ToÃ¡n TÃ­nh Äiá»ƒm

```
Äiá»ƒm CÆ¡ Báº£n = CÃ¢u Tráº£ Lá»i ÄÃºng Ã— 100
Bonus Thá»i Gian = Tráº£ Lá»i Nhanh Ã— 10
Bonus Streak = ÄÃºng LiÃªn Tiáº¿p Ã— 5
Tá»•ng Äiá»ƒm = CÆ¡ Báº£n + Bonus Thá»i Gian + Bonus Streak
```

#### Báº£ng Xáº¿p Háº¡ng (Leaderboards)

-   **ToÃ n Cáº§u**: Top Ä‘iá»ƒm má»i thá»i Ä‘áº¡i
-   **Theo Game**: Xáº¿p háº¡ng tá»«ng game cá»¥ thá»ƒ
-   **Theo Thá»i Gian**: NgÃ y, tuáº§n, thÃ¡ng
-   **CÃ¡ NhÃ¢n**: Theo dÃµi tiáº¿n bá»™ cÃ¡ nhÃ¢n

**TÃ i liá»‡u:** `docs/game/GAME_ALGORITHMS_DESIGN.md`

---

## âš™ï¸ Cáº¥u HÃ¬nh

### Biáº¿n MÃ´i TrÆ°á»ng

Táº¡o file `.env` trong thÆ° má»¥c gá»‘c dá»± Ã¡n:

```env
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Application Ports
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SERVER_SPRING_PORT=8080
SERVER_FLASH_PORT=8001

#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Database Configuration
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
POSTGRES_DB=card_words
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_EXTERNAL_PORT=5433

#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Redis Configuration
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
REDIS_EXTERNAL_PORT=6379
REDIS_AI_DB=1  # AI service uses DB 1, Spring Boot uses DB 0

#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# JWT Authentication
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
JWT_SECRET=your_jwt_secret_key_min_256_bits
JWT_EXPIRATION=86400000  # 24 hours in milliseconds

#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Email Configuration (Gmail)
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
MAIL_USERNAME=your_email@gmail.com
MAIL_PASSWORD=your_gmail_app_password  # KHÃ”NG PHáº¢I máº­t kháº©u Gmail cá»§a báº¡n!

#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Google OAuth2
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
GOOGLE_OAUTH_CLIENT_ID=your_client_id.apps.googleusercontent.com
GOOGLE_OAUTH_CLIENT_SECRET=your_client_secret
GOOGLE_OAUTH_REDIRECT_URI=http://localhost:8080/api/v1/auth/google/callback

#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Firebase Storage
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FIREBASE_STORAGE_BUCKET=your_project.appspot.com
FIREBASE_SERVICE_ACCOUNT_PATH=/path/to/service-account.json

#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Admin Tools
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PGADMIN_DEFAULT_EMAIL=admin@cardwords.com
PGADMIN_DEFAULT_PASSWORD=admin
```

**âš ï¸ LÆ°u Ã½ Báº£o Máº­t:** KhÃ´ng bao giá» commit `.env` lÃªn version control. Sá»­ dá»¥ng `.env.example` lÃ m máº«u.

---

## ğŸ”§ PhÃ¡t Triá»ƒn

### PhÃ¡t Triá»ƒn Local (KhÃ´ng dÃ¹ng Docker)

#### 1. Spring Boot Backend

```bash
cd card-words

# CÃ i Ä‘áº·t dependencies
mvn clean install

# Cháº¡y vá»›i hot reload
mvn spring-boot:run

# Hoáº·c cháº¡y JAR
mvn clean package -DskipTests
java -jar target/card-words-0.0.1-SNAPSHOT.jar
```

**Truy cáº­p:** http://localhost:8080

#### 2. AI Service

```bash
cd card-words-ai

# CÃ i Ä‘áº·t Poetry (náº¿u chÆ°a cÃ³)
curl -sSL https://install.python-poetry.org | python3 -

# CÃ i Ä‘áº·t dependencies
poetry install

# KÃ­ch hoáº¡t mÃ´i trÆ°á»ng áº£o
poetry shell

# Cháº¡y vá»›i hot reload
poetry run uvicorn app.main:app --reload --port 8001
```

**Truy cáº­p:** http://localhost:8001

#### 3. Thiáº¿t Láº­p Database

```bash
# Chá»‰ khá»Ÿi cháº¡y PostgreSQL vÃ  Redis
docker-compose up -d postgres redis

# Kiá»ƒm tra káº¿t ná»‘i
psql -h localhost -p 5433 -U postgres -d card_words
```

### PhÃ¡t Triá»ƒn Docker

#### Build Services

```bash
# Build táº¥t cáº£ services
docker-compose build

# Build service cá»¥ thá»ƒ
docker-compose build card-words-api
docker-compose build card-words-ai

# Build khÃ´ng cache (clean build)
docker-compose build --no-cache card-words-api
```

#### Run Services

```bash
# Start táº¥t cáº£ services
docker-compose up -d

# Start service cá»¥ thá»ƒ
docker-compose up -d postgres redis card-words-api

# Xem logs
docker-compose logs -f card-words-api

# Theo dÃµi logs tá»« táº¥t cáº£ services
docker-compose logs -f
```

#### Stop Services

```bash
# Stop táº¥t cáº£ services
docker-compose stop

# Stop service cá»¥ thá»ƒ
docker-compose stop card-words-api

# Stop vÃ  remove containers
docker-compose down

# Remove containers vÃ  volumes (âš ï¸ XÃ“A Dá»® LIá»†U)
docker-compose down -v
```

### Testing

#### Spring Boot Tests

```bash
cd card-words

# Cháº¡y táº¥t cáº£ tests
mvn test

# Cháº¡y test class cá»¥ thá»ƒ
mvn test -Dtest=VocabServiceTest

# Cháº¡y vá»›i coverage report
mvn clean test jacoco:report
```

#### AI Service Tests

```bash
cd card-words-ai

# Cháº¡y táº¥t cáº£ tests
poetry run pytest

# Cháº¡y vá»›i coverage
poetry run pytest --cov=app

# Cháº¡y test cá»¥ thá»ƒ
poetry run pytest tests/test_predictions.py
```

---

## ğŸ—„ï¸ CÆ¡ Sá»Ÿ Dá»¯ Liá»‡u

### Quáº£n LÃ½ Schema

**Flyway migrations** quáº£n lÃ½ táº¥t cáº£ thay Ä‘á»•i schema:

-   **Vá»‹ trÃ­:** `card-words/src/main/resources/db/migration/`
-   **Tá»± Ä‘á»™ng cháº¡y:** Khi khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng
-   **Äáº·t tÃªn:** `V{version}__{description}.sql`
-   **PhiÃªn báº£n:** Tuáº§n tá»± (V1, V2, V3, ...)

#### Lá»‹ch Sá»­ Migration

| PhiÃªn báº£n | MÃ´ táº£             | Báº£ng Ä‘Æ°á»£c thÃªm                                   |
| --------- | ----------------- | ------------------------------------------------ |
| V1        | Initial schema    | `users`, `roles`, `topics`, `vocabs`             |
| V2        | Games system      | `games`, `game_sessions`, `game_session_details` |
| V3        | Learning progress | `user_vocab_progress` (SM-2 algorithm)           |
| V4        | Streak tracking   | `streak_records`                                 |
| V5        | Leaderboards      | `leaderboards`, `game_leaderboards`              |
| V6        | Notifications     | `notifications`                                  |
| V7        | Admin tools       | `action_logs` + missing columns                  |

#### Táº¡o Migration Má»›i

```bash
cd card-words/src/main/resources/db/migration

# Táº¡o file má»›i
touch V8__add_user_preferences.sql
```

```sql
-- V8__add_user_preferences.sql
CREATE TABLE user_preferences (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    theme VARCHAR(20) DEFAULT 'light',
    language VARCHAR(10) DEFAULT 'en',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_user_preferences_user_id ON user_preferences(user_id);
```

### Sao LÆ°u & KhÃ´i Phá»¥c

#### Sao LÆ°u Tá»± Äá»™ng

```bash
cd card-words

# Windows
./backup-database.bat

# Linux/Mac
chmod +x backup-database.sh
./backup-database.sh
```

**Vá»‹ trÃ­ backup:** `card-words/database-backups/card_words_YYYYMMDD_HHMMSS.sql`

#### Sao LÆ°u HÃ ng NgÃ y Tá»± Äá»™ng

```bash
# Windows Task Scheduler
./auto-backup.bat

# Linux Cron
chmod +x auto-backup.sh
crontab -e
# ThÃªm: 0 2 * * * /path/to/auto-backup.sh  # HÃ ng ngÃ y lÃºc 2 AM
```

#### KhÃ´i Phá»¥c tá»« Backup

```bash
cd card-words

# Windows
./restore-database.bat database-backups/card_words_20251119_090000.sql

# Linux/Mac
./restore-database.sh database-backups/card_words_20251119_090000.sql
```

### Database Schema

#### CÃ¡c Báº£ng Cá»‘t LÃµi

**users** - TÃ i khoáº£n ngÆ°á»i dÃ¹ng

```sql
- id (UUID, PK)
- email (VARCHAR, UNIQUE)
- password (VARCHAR, hashed)
- name (VARCHAR)
- avatar_url (VARCHAR)
- created_at (TIMESTAMP)
- updated_at (TIMESTAMP)
```

**vocabs** - Tá»« vá»±ng

```sql
- id (UUID, PK)
- word (VARCHAR)
- meaning (TEXT)
- example (TEXT)
- image_url (VARCHAR)
- topic_id (UUID, FK â†’ topics)
- difficulty (VARCHAR)
- created_at (TIMESTAMP)
```

**user_vocab_progress** - Láº·p láº¡i ngáº¯t quÃ£ng SM-2

```sql
- id (UUID, PK)
- user_id (UUID, FK â†’ users)
- vocab_id (UUID, FK â†’ vocabs)
- status (VARCHAR: KNOWN, UNKNOWN, MASTERED)
- last_reviewed (DATE)
- times_correct (INTEGER)
- times_wrong (INTEGER)
- ef_factor (DECIMAL)  # Easiness Factor
- interval_days (INTEGER)
- repetition (INTEGER)
- next_review_date (DATE)
- created_at (TIMESTAMP)
- updated_at (TIMESTAMP)
```

**notifications** - ThÃ´ng bÃ¡o ngÆ°á»i dÃ¹ng

```sql
- id (UUID, PK)
- user_id (UUID, FK â†’ users)
- title (VARCHAR)
- content (TEXT)
- type (VARCHAR)
- is_read (BOOLEAN)
- created_at (TIMESTAMP)
```

**Full schema:** Xem migrations trong `card-words/src/main/resources/db/migration/`

---

## ğŸ“š TÃ i Liá»‡u API

### Swagger UI

TÃ i liá»‡u API tÆ°Æ¡ng tÃ¡c vá»›i chá»©c nÄƒng try-it-out:

**URL:** http://localhost:8080/swagger-ui.html

**TÃ­nh nÄƒng:**

-   Danh sÃ¡ch endpoint Ä‘áº§y Ä‘á»§
-   Schemas request/response
-   Test xÃ¡c thá»±c
-   Gá»i API trá»±c tiáº¿p

### OpenAPI Specification

**URL:** http://localhost:8080/v3/api-docs

**Äá»‹nh dáº¡ng:** JSON (OpenAPI 3.0)

### Postman Collection

Import collection tá»«: `docs/postman/Card-Words-API.postman_collection.json`

### Danh Má»¥c API Endpoint

#### ğŸ” Authentication (`/api/v1/auth`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `POST` | `/signup` | ÄÄƒng kÃ½ tÃ i khoáº£n má»›i |
| `POST` | `/signin` | ÄÄƒng nháº­p báº±ng email/password |
| `POST` | `/signout` | ÄÄƒng xuáº¥t |
| `POST` | `/google` | ÄÄƒng nháº­p báº±ng Google OAuth2 |
| `POST` | `/refresh-token` | LÃ m má»›i access token |
| `POST` | `/forgot-password` | YÃªu cáº§u Ä‘áº·t láº¡i máº­t kháº©u |

#### ğŸ‘¤ User (`/api/v1/users`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Láº¥y thÃ´ng tin profile |
| `PUT` | `/` | Cáº­p nháº­t thÃ´ng tin profile |
| `PUT` | `/avatar` | Upload avatar |
| `POST` | `/change-password` | Äá»•i máº­t kháº©u |
| `GET` | `/games/history` | Lá»‹ch sá»­ chÆ¡i game |
| `GET` | `/games/stats` | Thá»‘ng kÃª game tá»•ng quan |

#### ğŸ”¥ User Streak (`/api/v1/user/streak`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Láº¥y thÃ´ng tin streak hiá»‡n táº¡i |
| `POST` | `/record` | Ghi nháº­n hoáº¡t Ä‘á»™ng há»c |

#### ğŸ“š Vocabulary (`/api/v1/vocabs`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Danh sÃ¡ch tá»« vá»±ng (phÃ¢n trang) |
| `GET` | `/{id}` | Láº¥y tá»« vá»±ng theo ID |
| `GET` | `/word/{word}` | Láº¥y tá»« vá»±ng theo tá»« |
| `GET` | `/search` | TÃ¬m kiáº¿m tá»« vá»±ng |
| `GET` | `/cefr/{cefr}` | Láº¥y tá»« vá»±ng theo CEFR level |
| `GET` | `/{id}/media` | Láº¥y URL hÃ¬nh áº£nh/Ã¢m thanh |
| `GET` | `/word/{word}/media` | Láº¥y media theo tá»« |

#### ğŸ“‚ Topics (`/api/v1/topics`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Danh sÃ¡ch chá»§ Ä‘á» |
| `GET` | `/{id}` | Chi tiáº¿t chá»§ Ä‘á» |

#### ğŸ”” Notifications (`/api/v1/notifications`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Danh sÃ¡ch thÃ´ng bÃ¡o |
| `GET` | `/summary` | Tá»•ng quan thÃ´ng bÃ¡o |
| `PUT` | `/{id}/read` | ÄÃ¡nh dáº¥u Ä‘Ã£ Ä‘á»c |
| `PUT` | `/read-all` | ÄÃ¡nh dáº¥u táº¥t cáº£ Ä‘Ã£ Ä‘á»c |
| `DELETE` | `/{id}` | XÃ³a thÃ´ng bÃ¡o |
| `DELETE` | `/selected` | XÃ³a nhiá»u thÃ´ng bÃ¡o |

#### ğŸ® Quick Quiz (`/api/v1/games/quick-quiz`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `POST` | `/start` | Báº¯t Ä‘áº§u game |
| `POST` | `/start-auto` | Báº¯t Ä‘áº§u game tá»± Ä‘á»™ng |
| `POST` | `/answer` | Tráº£ lá»i cÃ¢u há»i |
| `POST` | `/skip` | Bá» qua cÃ¢u há»i |
| `GET` | `/session/{sessionId}` | Xem káº¿t quáº£ game |
| `GET` | `/instructions` | HÆ°á»›ng dáº«n chÆ¡i |
| `GET` | `/leaderboard` | Báº£ng xáº¿p háº¡ng |

#### ğŸ–¼ï¸ Image-Word Matching (`/api/v1/games/image-word-matching`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `POST` | `/start` | Báº¯t Ä‘áº§u game |
| `POST` | `/start-auto` | Báº¯t Ä‘áº§u game tá»± Ä‘á»™ng |
| `POST` | `/answer` | Tráº£ lá»i cÃ¢u há»i |
| `GET` | `/session/{sessionId}` | Xem káº¿t quáº£ game |
| `GET` | `/instructions` | HÆ°á»›ng dáº«n chÆ¡i |
| `GET` | `/leaderboard` | Báº£ng xáº¿p háº¡ng |

#### ğŸ“– Word-Definition Matching (`/api/v1/games/word-definition-matching`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `POST` | `/start` | Báº¯t Ä‘áº§u game |
| `POST` | `/start-auto` | Báº¯t Ä‘áº§u game tá»± Ä‘á»™ng |
| `POST` | `/answer` | Tráº£ lá»i cÃ¢u há»i |
| `GET` | `/session/{sessionId}` | Xem káº¿t quáº£ game |
| `GET` | `/instructions` | HÆ°á»›ng dáº«n chÆ¡i |
| `GET` | `/leaderboard` | Báº£ng xáº¿p háº¡ng |

#### ğŸ† Leaderboard (`/api/v1/leaderboard`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Báº£ng xáº¿p háº¡ng tá»•ng |
| `GET` | `/game/{gameId}` | Báº£ng xáº¿p háº¡ng theo game |

#### ğŸ“Š User Stats (`/api/v1/user-stats`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Thá»‘ng kÃª há»c táº­p |

#### ğŸ“ Flashcard Review (`/api/v1/flashcard-review`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/due` | Láº¥y tá»« cáº§n Ã´n táº­p |
| `POST` | `/review` | Ghi nháº­n káº¿t quáº£ Ã´n táº­p |

#### ğŸ“ˆ User Vocab Progress (`/api/v1/user-vocab-progress`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Tiáº¿n Ä‘á»™ há»c tá»« vá»±ng |
| `GET` | `/topic/{topicId}` | Tiáº¿n Ä‘á»™ theo chá»§ Ä‘á» |

#### ğŸ¤– Chatbot (`/api/v1/chatbot`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `POST` | `/chat` | Chat vá»›i AI |

#### âš™ï¸ Game Settings (`/api/v1/game-settings`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Láº¥y cÃ i Ä‘áº·t game |
| `PUT` | `/` | Cáº­p nháº­t cÃ i Ä‘áº·t game |

#### ğŸ“± Offline Sync (`/api/v1/offline-sync`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/download` | Táº£i dá»¯ liá»‡u offline |
| `POST` | `/upload` | Äá»“ng bá»™ dá»¯ liá»‡u |

---

### ğŸ”§ Admin API Endpoints

#### ğŸ‘¥ User Admin (`/api/v1/admin/users`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Danh sÃ¡ch ngÆ°á»i dÃ¹ng |
| `GET` | `/{id}` | Chi tiáº¿t ngÆ°á»i dÃ¹ng |
| `GET` | `/email/{email}` | TÃ¬m theo email |
| `GET` | `/search` | TÃ¬m kiáº¿m ngÆ°á»i dÃ¹ng |
| `GET` | `/statistics` | Thá»‘ng kÃª ngÆ°á»i dÃ¹ng |
| `GET` | `/registration-chart` | Biá»ƒu Ä‘á»“ Ä‘Äƒng kÃ½ |
| `GET` | `/system-overview` | Tá»•ng quan há»‡ thá»‘ng |
| `GET` | `/game-stats` | Thá»‘ng kÃª game |
| `PUT` | `/{id}/ban` | KhÃ³a/má»Ÿ khÃ³a tÃ i khoáº£n |
| `PUT` | `/{id}/activate` | KÃ­ch hoáº¡t tÃ i khoáº£n |
| `PUT` | `/{id}/roles` | Cáº­p nháº­t role |
| `POST` | `/{id}/reset-password` | Reset máº­t kháº©u |
| `DELETE` | `/{id}` | XÃ³a ngÆ°á»i dÃ¹ng |

#### ğŸ“š Vocab Admin (`/api/v1/admin/vocabs`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Danh sÃ¡ch tá»« vá»±ng |
| `GET` | `/{id}` | Chi tiáº¿t tá»« vá»±ng |
| `GET` | `/word/{word}` | TÃ¬m theo tá»« |
| `GET` | `/search` | TÃ¬m kiáº¿m tá»« vá»±ng |
| `GET` | `/cefr/{cefr}` | Lá»c theo CEFR |
| `POST` | `/` | ThÃªm tá»« vá»±ng |
| `POST` | `/bulk-import` | Import hÃ ng loáº¡t |
| `PUT` | `/{id}` | Cáº­p nháº­t tá»« vá»±ng |
| `PUT` | `/word/{word}` | Cáº­p nháº­t theo tá»« |
| `DELETE` | `/{id}` | XÃ³a tá»« vá»±ng |
| `GET` | `/export/excel` | Xuáº¥t Excel |

#### ğŸ“‚ Topic Admin (`/api/v1/admin/topics`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Danh sÃ¡ch chá»§ Ä‘á» |
| `POST` | `/` | ThÃªm chá»§ Ä‘á» |
| `PUT` | `/{id}` | Cáº­p nháº­t chá»§ Ä‘á» |
| `DELETE` | `/{id}` | XÃ³a chá»§ Ä‘á» |

#### ğŸ·ï¸ Type Admin (`/api/v1/admin/types`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Danh sÃ¡ch loáº¡i tá»« |
| `POST` | `/` | ThÃªm loáº¡i tá»« |
| `PUT` | `/{id}` | Cáº­p nháº­t loáº¡i tá»« |
| `DELETE` | `/{id}` | XÃ³a loáº¡i tá»« |

#### ğŸ® Game Admin (`/api/v1/admin/games`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Danh sÃ¡ch game |
| `GET` | `/stats` | Thá»‘ng kÃª game |

#### ğŸ”” Notification Admin (`/api/v1/admin/notifications`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `POST` | `/` | Táº¡o thÃ´ng bÃ¡o |
| `POST` | `/broadcast` | Broadcast tá»›i táº¥t cáº£ |

#### ğŸ“ Action Logs (`/api/v1/admin/action-logs`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Danh sÃ¡ch action logs |
| `GET` | `/statistics` | Thá»‘ng kÃª logs |
| `GET` | `/export` | Export logs |
| `DELETE` | `/cleanup` | XÃ³a logs cÅ© |

#### ğŸ“ˆ Vocab Progress Admin (`/api/v1/admin/vocab-progress`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `GET` | `/` | Tiáº¿n Ä‘á»™ há»c cá»§a users |
| `GET` | `/user/{userId}` | Tiáº¿n Ä‘á»™ theo user |

#### ğŸ—„ï¸ Firebase Storage (`/api/v1/admin/storage`)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| `POST` | `/upload` | Upload file |
| `DELETE` | `/delete` | XÃ³a file |

### WebSocket Endpoints

**Káº¿t ná»‘i:** `ws://localhost:8080/ws`

**Subscriptions:**

```javascript
// ThÃ´ng bÃ¡o má»›i
stompClient.subscribe('/user/queue/notifications', callback);

// Sá»± kiá»‡n Ä‘Ã¡nh dáº¥u Ä‘Ã£ Ä‘á»c
stompClient.subscribe('/user/queue/notifications/read', callback);

// Sá»± kiá»‡n Ä‘Ã¡nh dáº¥u táº¥t cáº£ Ä‘Ã£ Ä‘á»c
stompClient.subscribe('/user/queue/notifications/read-all', callback);

// Sá»± kiá»‡n xÃ³a
stompClient.subscribe('/user/queue/notifications/deleted', callback);

// Sá»± kiá»‡n xÃ³a hÃ ng loáº¡t
stompClient.subscribe('/user/queue/notifications/batch-deleted', callback);
```

**TÃ i liá»‡u:**

-   HÆ°á»›ng dáº«n Ä‘áº§y Ä‘á»§: `docs/WEBSOCKET_EVENTS.md`
-   VÃ­ dá»¥ Client: `docs/WEBSOCKET_CLIENT_GUIDE.md`
-   Notification playbook: `docs/websocket/WEBSOCKET_NOTIFICATION_PLAYBOOK.md`
-   Test nhanh: `test-websocket-events.html`

---

## ğŸ› ï¸ Kháº¯c Phá»¥c Sá»± Cá»‘

### CÃ¡c Váº¥n Äá» ThÆ°á»ng Gáº·p

#### 1. Containers KhÃ´ng Khá»Ÿi Äá»™ng

```bash
# Kiá»ƒm tra tráº¡ng thÃ¡i container
docker-compose ps

# Xem logs lá»—i
docker-compose logs --tail=50

# Stop táº¥t cáº£ services
docker-compose down

# XÃ³a volumes (âš ï¸ XÃ“A Dá»® LIá»†U)
docker-compose down -v

# Rebuild vÃ  restart
docker-compose up -d --build
```

#### 2. Port ÄÃ£ ÄÆ°á»£c Sá»­ Dá»¥ng

```bash
# Windows: TÃ¬m process Ä‘ang dÃ¹ng port
netstat -ano | findstr :8080
# Kill process báº±ng PID
taskkill /PID <process_id> /F

# Linux/Mac: TÃ¬m vÃ  kill process
lsof -ti:8080 | xargs kill -9

# Hoáº·c Ä‘á»•i port trong .env
SERVER_SPRING_PORT=8081
```

#### 3. Káº¿t Ná»‘i Database Tháº¥t Báº¡i

```bash
# Kiá»ƒm tra logs PostgreSQL
docker-compose logs postgres

# XÃ¡c minh PostgreSQL Ä‘ang cháº¡y
docker-compose ps postgres

# Test káº¿t ná»‘i
docker-compose exec postgres psql -U postgres -d card_words -c 'SELECT 1;'

# Kiá»ƒm tra máº¡ng
docker network inspect server_default
```

#### 4. Lá»—i Migration

```bash
# Xem tráº¡ng thÃ¡i Flyway
docker-compose logs card-words-api | grep Flyway

# Sá»­a chá»¯a Flyway schema
docker-compose exec card-words-api \
  mvn flyway:repair -Dflyway.url=jdbc:postgresql://postgres:5432/card_words

# Reset database (âš ï¸ XÃ“A Táº¤T Cáº¢ Dá»® LIá»†U)
docker-compose down -v
docker-compose up -d
```

#### 5. Email KhÃ´ng Gá»­i ÄÆ°á»£c

```bash
# Kiá»ƒm tra cáº¥u hÃ¬nh email
docker-compose logs card-words-api | grep "mail"

# XÃ¡c minh Gmail App Password
# 1. Báº­t XÃ¡c minh 2 bÆ°á»›c trÃªn TÃ i khoáº£n Google
# 2. Táº¡o App Password: https://myaccount.google.com/apppasswords
# 3. Cáº­p nháº­t MAIL_PASSWORD trong .env
# 4. Restart service: docker-compose restart card-words-api
```

#### 6. Káº¿t Ná»‘i WebSocket Tháº¥t Báº¡i

```bash
# Kiá»ƒm tra WebSocket endpoint
curl -i -N -H "Connection: Upgrade" \
  -H "Upgrade: websocket" \
  -H "Sec-WebSocket-Version: 13" \
  -H "Sec-WebSocket-Key: test" \
  http://localhost:8080/ws

# Báº­t debug logging
# ThÃªm vÃ o application.properties:
logging.level.org.springframework.web.socket=DEBUG

# Restart vÃ  kiá»ƒm tra logs
docker-compose restart card-words-api
docker-compose logs -f card-words-api | grep WebSocket
```

#### 7. AI Service Dá»± ÄoÃ¡n Tháº¥t Báº¡i

```bash
# Kiá»ƒm tra logs AI service
docker-compose logs card-words-ai

# XÃ¡c minh file model tá»“n táº¡i
docker-compose exec card-words-ai ls -la /app/models/

# Test prediction endpoint
curl http://localhost:8001/api/predict \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"user_id": "uuid", "vocab_id": "uuid"}'

# Huáº¥n luyá»‡n láº¡i model náº¿u cáº§n
cd card-words-ai
./train-model.sh
```

### Kiá»ƒm Tra Sá»©c Khá»e (Health Checks)

```bash
# Spring Boot actuator
curl http://localhost:8080/actuator/health | jq

# AI Service health
curl http://localhost:8001/health | jq

# PostgreSQL
docker-compose exec postgres pg_isready -U postgres

# Redis
docker-compose exec redis redis-cli ping

# Táº¥t cáº£ services
docker-compose ps
```

### GiÃ¡m SÃ¡t Hiá»‡u NÄƒng

```bash
# Spring Boot metrics
curl http://localhost:8080/actuator/metrics | jq

# Hiá»‡u nÄƒng Database
docker-compose exec postgres psql -U postgres -d card_words -c '\
  SELECT pid, usename, application_name, state, query \
  FROM pg_stat_activity WHERE state = '\''active'\'';'

# Redis stats
docker-compose exec redis redis-cli INFO stats

# Sá»­ dá»¥ng tÃ i nguyÃªn Docker
docker stats
```

---

## ğŸ¤ ÄÃ³ng GÃ³p

### Quy TrÃ¬nh PhÃ¡t Triá»ƒn

#### 1. Táº¡o Feature Branch

```bash
# Cáº­p nháº­t nhÃ¡nh main
git checkout main
git pull origin main

# Táº¡o feature branch
git checkout -b feature/ten-tinh-nang-cua-ban

# Cho sá»­a lá»—i
git checkout -b fix/mo-ta-loi

# Cho tÃ i liá»‡u
git checkout -b docs/chu-de-tai-lieu
```

#### 2. Thá»±c Hiá»‡n Thay Äá»•i

```bash
# Viáº¿t code
# ThÃªm tests
# Cáº­p nháº­t tÃ i liá»‡u

# Kiá»ƒm tra code style
mvn checkstyle:check  # Java
poetry run black app/  # Python
poetry run flake8 app/  # Python linting
```

#### 3. Commit Thay Äá»•i

```bash
# Stage files
git add .

# Commit vá»›i conventional message
git commit -m "feat: add smart review predictions"

# Push lÃªn remote
git push origin feature/ten-tinh-nang-cua-ban
```

#### 4. Táº¡o Pull Request

1. Truy cáº­p GitHub repository
2. Nháº¥n "New Pull Request"
3. Chá»n feature branch cá»§a báº¡n
4. Äiá»n vÃ o PR template:
    - MÃ´ táº£ thay Ä‘á»•i
    - CÃ¡c issue liÃªn quan
    - Testing Ä‘Ã£ thá»±c hiá»‡n
    - Screenshots (náº¿u cÃ³ thay Ä‘á»•i UI)
5. YÃªu cáº§u review tá»« thÃ nh viÃªn team
6. Giáº£i quyáº¿t cÃ¡c comment review
7. Merge khi Ä‘Æ°á»£c approve

### Quy Æ¯á»›c Commit Message

TuÃ¢n theo [Conventional Commits](https://www.conventionalcommits.org/):

```
<type>(<scope>): <subject>

<body>

<footer>
```

#### CÃ¡c Loáº¡i (Types)

-   `feat`: TÃ­nh nÄƒng má»›i
-   `fix`: Sá»­a lá»—i
-   `docs`: Thay Ä‘á»•i tÃ i liá»‡u
-   `refactor`: TÃ¡i cáº¥u trÃºc code (khÃ´ng thay Ä‘á»•i chá»©c nÄƒng)
-   `test`: ThÃªm hoáº·c cáº­p nháº­t tests
-   `chore`: TÃ¡c vá»¥ báº£o trÃ¬ (dependencies, configs)
-   `perf`: Cáº£i thiá»‡n hiá»‡u nÄƒng
-   `style`: Äá»‹nh dáº¡ng code (khÃ´ng thay Ä‘á»•i logic)
-   `ci`: Thay Ä‘á»•i CI/CD pipeline
-   `build`: Thay Ä‘á»•i há»‡ thá»‘ng build

#### VÃ­ Dá»¥

```bash
# Feature
git commit -m "feat(notifications): add WebSocket real-time delivery"

# Bug fix
git commit -m "fix(auth): resolve JWT token expiration issue"

# Documentation
git commit -m "docs(readme): update installation instructions"

# Refactoring
git commit -m "refactor(service): simplify streak calculation logic"

# Performance
git commit -m "perf(api): add Redis caching for vocab queries"

# Nhiá»u Ä‘oáº¡n vÄƒn
git commit -m "feat(games): add new word matching game

- Implement game logic with scoring
- Add leaderboard integration
- Create admin configuration panel

Closes #123"
```

### HÆ°á»›ng Dáº«n Code Style

#### Java (Spring Boot)

-   TuÃ¢n theo [Google Java Style Guide](https://google.github.io/styleguide/javaguide.html)
-   Sá»­ dá»¥ng tÃªn biáº¿n cÃ³ Ã½ nghÄ©a
-   ThÃªm JavaDoc cho cÃ¡c public methods
-   Giá»¯ methods dÆ°á»›i 50 dÃ²ng
-   Viáº¿t unit tests (má»¥c tiÃªu: > 80% coverage)

```java
/**
 * Calculates the next review date using SM-2 algorithm.
 *
 * @param progress Current vocabulary progress
 * @param quality User's recall quality (0-5)
 * @return Updated progress with new review date
 */
public UserVocabProgress calculateNextReview(UserVocabProgress progress, int quality) {
    // Implementation
}
```

#### Python (AI Service)

-   TuÃ¢n theo [PEP 8](https://peps.python.org/pep-0008/)
-   Sá»­ dá»¥ng type hints
-   ThÃªm docstrings cho functions
-   Format vá»›i Black
-   Lint vá»›i Flake8

```python
from typing import Dict, List

def predict_review_success(
    user_id: str,
    vocab_id: str,
    features: Dict[str, float]
) -> float:
    """
    Predicts probability of successful vocabulary recall.

    Args:
        user_id: User's UUID
        vocab_id: Vocabulary UUID
        features: Engineered features for prediction

    Returns:
        Probability score between 0.0 and 1.0
    """
    # Implementation
```

### YÃªu Cáº§u Testing

-   Táº¥t cáº£ tÃ­nh nÄƒng má»›i pháº£i bao gá»“m tests
-   Sá»­a lá»—i pháº£i bao gá»“m regression tests
-   Má»¥c tiÃªu > 80% code coverage
-   Cháº¡y tests trÆ°á»›c khi commit

```bash
# Java tests
mvn clean test

# Python tests
poetry run pytest --cov=app tests/

# Integration tests
docker-compose -f docker-compose.test.yml up --abort-on-container-exit
```

---

## ğŸš€ Deploy lÃªn Production

### Deploy lÃªn VPS

Sau khi sá»­a code vÃ  push lÃªn GitHub, deploy lÃªn VPS ráº¥t Ä‘Æ¡n giáº£n:

#### CÃ¡ch 1: Deploy tá»« mÃ¡y local (Windows)
```powershell
# Push code
git push origin main

# Deploy tá»± Ä‘á»™ng
.\scripts\deploy-from-local.ps1
```

#### CÃ¡ch 2: Deploy tá»« mÃ¡y local (Linux/Mac)
```bash
# Push code
git push origin main

# Deploy tá»± Ä‘á»™ng
bash scripts/deploy-from-local.sh
```

#### CÃ¡ch 3: SSH thá»§ cÃ´ng
```bash
# Push code (trÃªn mÃ¡y local)
git push origin main

# SSH vÃ o VPS
ssh root@103.9.77.220

# Deploy
cd /opt/card-words-services
bash scripts/deploy-vps.sh
```

### TÃ i liá»‡u Deploy chi tiáº¿t

- **Quick Reference**: `DEPLOY-QUICK-REFERENCE.md` - CÃ¡c lá»‡nh thÆ°á»ng dÃ¹ng
- **Full Guide**: `docs/DEPLOY-GUIDE.md` - HÆ°á»›ng dáº«n Ä‘áº§y Ä‘á»§
- **HTTPS Setup**: `docs/HTTPS-SETUP-GUIDE.md` - CÃ i Ä‘áº·t SSL/HTTPS

### Scripts Deploy cÃ³ sáºµn

| Script | MÃ´ táº£ | Cháº¡y á»Ÿ Ä‘Ã¢u |
|--------|-------|------------|
| `deploy-vps.sh` | Deploy Ä‘áº§y Ä‘á»§ (rebuild images) | VPS |
| `quick-deploy.sh` | Deploy nhanh (khÃ´ng rebuild) | VPS |
| `deploy-from-local.sh` | Deploy tá»« mÃ¡y Linux/Mac | Local |
| `deploy-from-local.ps1` | Deploy tá»« mÃ¡y Windows | Local |
| `setup-https.sh` | CÃ i Ä‘áº·t HTTPS/SSL | VPS |

---

## ğŸ“„ Giáº¥y PhÃ©p

Dá»± Ã¡n nÃ y Ä‘Æ°á»£c cáº¥p phÃ©p theo Giáº¥y phÃ©p MIT - xem file [LICENSE](LICENSE) Ä‘á»ƒ biáº¿t chi tiáº¿t.

---

## ğŸ‘¥ NhÃ³m Thá»±c Hiá»‡n

**Sinh viÃªn:** NgÃ´ Minh Thuáº­n  
**TrÆ°á»ng:** TrÆ°á»ng Äáº¡i há»c CÃ´ng ThÆ°Æ¡ng TP. Há»“ ChÃ­ Minh (HUIT)
**Äá»“ Ã¡n:** KhÃ³a luáº­n tá»‘t nghiá»‡p

---

## ğŸ“ Há»— Trá»£

### TÃ i Liá»‡u

-   **TÃ i liá»‡u chÃ­nh**: `docs/`
-   **Tham kháº£o API**: http://localhost:8080/swagger-ui.html
-   **HÆ°á»›ng dáº«n WebSocket**: `docs/WEBSOCKET_EVENTS.md`
-   **Triá»ƒn khai**: `docs/docker/`

### BÃ¡o CÃ¡o Lá»—i

TÃ¬m tháº¥y lá»—i? Vui lÃ²ng táº¡o issue trÃªn GitHub vá»›i:

-   MÃ´ táº£ váº¥n Ä‘á»
-   CÃ¡c bÆ°á»›c tÃ¡i hiá»‡n
-   HÃ nh vi mong Ä‘á»£i vs thá»±c táº¿
-   Screenshots (náº¿u cÃ³)
-   Chi tiáº¿t mÃ´i trÆ°á»ng (OS, Docker version, etc.)

### LiÃªn Há»‡

-   Email: thuanthichlaptrinh@gmail.com
-   GitHub: [@thuanthichlaptrinh](https://github.com/thuanthichlaptrinh)

---

**ÄÆ°á»£c thá»±c hiá»‡n vá»›i â¤ï¸ bá»Ÿi Card Words Team**
